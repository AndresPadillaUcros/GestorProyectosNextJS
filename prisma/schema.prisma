// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

generator typegraphql {
  provider           = "typegraphql-prisma"
  output             = "../prisma/generated/type-graphql"
  emitTranspiledCode = true
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Enum_Rol {
  Estudiante
  Lider
  Administrador
}

enum Enum_EstadoUsuario {
  Pendiente
  Autorizado
  NoAutorizado
}

enum Enum_EstadoProyecto {
  Activo
  Inactivo
}

enum Enum_FaseProyecto {
  Iniciado
  Desarrollo
  Terminado
}

enum Enum_EstadoInscripcion {
  Aceptado
  Rechazado
  Pendiente
}

model Usuario {
  id                 String             @id @default(cuid())
  email              String             @unique
  nombre             String
  apellido           String
  identificacion     String             @unique
  rol                Enum_Rol
  estado             Enum_EstadoUsuario
  proyectosLiderados Proyecto[]
  avances            Avances[]
  inscripciones      Inscripcion[]
}

model Proyecto {
  id                   String                 @id @default(cuid())
  nombre               String
  presupuesto          String?
  fechaInicio          DateTime?
  fechaFin             DateTime?
  estado               Enum_EstadoProyecto @default(Activo)
  fase                 Enum_FaseProyecto  @default(Iniciado)
  objetivoGeneral      String?
  lider                Usuario                @relation(fields: [usuarioId], references: [id])
  usuarioId            String
  avances              Avances[]
  inscripciones        Inscripcion[]
  objetivosEspecificos ObjetivosEspecificos[]
}

model ObjetivosEspecificos {
  id          String   @id @default(cuid())
  descripcion String
  proyecto    Proyecto @relation(fields: [proyectoId], references: [id])
  proyectoId  String
}

model Avances {
  id            String   @id @default(cuid())
  fecha         DateTime @default(now())
  descripcion   String
  observaciones String?
  proyecto      Proyecto @relation(fields: [proyectoId], references: [id])
  proyectoId    String
  creadoPor     Usuario  @relation(fields: [usuarioId], references: [id])
  usuarioId     String
}

model Inscripcion {
  id           String                 @id @default(cuid())
  estado       Enum_EstadoInscripcion  @default(Pendiente)
  fechaIngreso DateTime @default(now())
  fechaEgreso  DateTime?
  proyecto     Proyecto               @relation(fields: [proyectoId], references: [id])
  proyectoId   String
  estudiante   Usuario                @relation(fields: [usuarioId], references: [id])
  usuarioId    String
}
